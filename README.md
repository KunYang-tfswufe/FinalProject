# FinalProject 我的毕业设计题目:基于边缘计算的藏红花全生长周期智能培育系统设计与实现

```
智能科技学院2026届本科毕业设计功能实现要求:

1.软硬件系统设计

可设计移动应用系统、基于智能硬件的应用系统、Web应用系统。

具体要求：

（1）能使用所学C/Java/Python等程序设计语言解决相对复杂的综合问题，目标集中，要有较为完整的主体业务逻辑（总体目标）；

（2）要采用合适的分层架构、视图和代码分离（总体架构）；

（3）要考虑系统所需要的用户界面适配显示效果（前端用户接口UI）；

（4）要使用MySQL/SQLServer/Oracle等数据库持久化的功能，其中移动应用系统、Web应用系统至少应包含6张业务逻辑关联数据表，并涉及到存储过程、触发器等技术点的应用（后端存储）；系统页面须实现响应式设计；整个系统须由前端页面和后台管理系统组成，后台管理系统能区分不同角色入口及对应管理权限；

（5）系统应该设计测试用例，通过测试，能反馈系统的稳定性和健壮性（系统测试），说明软/硬件系统核心功能是否达到预期；

（6）以微控制器（单片机51/STM32，推荐型号STM32L431RCT6，不建议使用型号STM32F103C8T6）为核心的智能应用系统，能够采用微控制器编写程序，实现传感器数据采集、设备终端数据显示、存储，系统应具有联网功能、数据通讯、网络控制、数据处理等功能，设备终端硬件需个人独立设计（底板可用面包板设计或PCB设计；各功能模块在底板集成基础上开发并实现对应功能），系统设计时应体现不同方案的对比以及如何完成各器件的选型，设计应贴合具体应用场景，避免同质化套壳设计；

（7）以微处理器（ARM）为核心的智能应用系统，采用ARM处理器编写程序，实现传感器数据采集、设备终端数据显示及存储，系统具有联网功能、数据通讯、网络控制、数据处理等功能，设备终端硬件需个人独立设计（底板可用面包板设计或PCB设计；各功能模块在底板上集成基础上开发并实现对应功能），系统设计时应体现不同方案的对比以及如何完成各器件的选型；

（8）智能物联网应用系统，针对特定的应用场景，采用物联网技术，将传感器、控制器、智能设备、互联网等多种物联网组件进行有机结合，实现对各种物品、设备、场所、人员的智能化管理和监控，要求选用合理的物联网中间件技术、系统运行安全稳定可靠，要求设备端硬件需个人独立设计（底板可用面包板设计，或PCB设计；各功能模块在底板上集成基础上开发并实现对应功能），系统设计时应体现不同方案的对比以及如何完成各器件的选型。

适用专业：计算机科学与技术（1-7）、智能科学与技术（1-8）、物联网工程（1-8）、信息管理与信息系统（1-5）
知网地址:https://co2.cnki.net/Login.html?dp=tfswufe&r=1685087871577
账户为学号例如:42212346
密码例如:let*********3(星号为加密部分)
```

# 重点: 项目核心背景信息(重点:AI/LLM请仔细阅读词标题下的内容,这是我的项目信息描述,请不要删除)

# 重点: 项目时间周期非常短只有一个月,开发模式绝对不能采用瀑布开发

为了方便AI/LLM在后续对话中快速理解上下文，以下是截至当前时间点的项目核心背景信息摘要。

### 1. 项目基本信息

- **项目名称:** 基于边缘计算的藏红花全生长周期智能培育系统设计与实现
- **项目目标:** 构建一个包含硬件采集、边缘处理和前端控制的完整物联网(IoT)系统。
- **核心架构:**
  1.  **感知控制层:** STM32 (数据采集与执行)
  2.  **边缘计算层:** 树莓派 (数据中转与Flask Web服务)
  3.  **应用表现层:** PWA (跨平台用户界面)

### 2. 开发者及环境信息

- **开发者操作系统:** **Arch Linux**
- **嵌入式IDE:** **STM32CubeIDE**
- **嵌入式调试工具:** 在Arch Linux下使用 **`minicom`**进行串口通信测试。
- **后端语言:** Python 3

### 3. 硬件选型

- **微控制器 (MCU):** `STM32L476RGT6U`
  - **原型开发板:** **NUCLEO-L476RG**
- **边缘计算设备:** **树莓派4B (Raspberry Pi 4B)**
- **STM32 -> 树莓派通信方式:** **UART串口**

---

## ✅ 项目规划清单 (Project Planning Checklist)

在深入详细的开发计划之前，我们先用这个清单来确保宏观方向的正确性。

1.  **一句话项目描述:** `这个项目是做什么的？`
    > 答：一个集STM32数据采集、树莓派边缘处理和PWA跨平台控制于一体的藏红花智能培育物联网系统。
2.  **目标用户画像:** `我在为谁开发？`
    > 答：小王，一名对现代农业技术充满热情的智能农业专业学生或研究员。他希望通过自动化技术提高藏红花的种植效率和品质，并能随时随地通过手机或电脑监控和管理培育环境。
3.  **MVP 功能列表:** `必须实现的核心功能有哪些？`
    > 1.  STM32能采集环境数据（温湿度、光照、土壤湿度）并上报给树莓派。
    > 2.  树莓派能接收、存储数据，并通过API提供给前端。
    > 3.  PWA前端能实时展示来自API的环境数据。
    > 4.  用户能在PWA前端下发控制指令（如：开/关水泵）。
    > 5.  STM32能接收并执行树莓派转发来的控制指令。
4.  **技术栈清单:** `前端、后端、数据库等。`
    > - **感知控制层 (STM32):** C语言, STM32 HAL库
    > - **边缘计算层 (树莓派):** Python, Flask, SQLAlchemy, Gunicorn
    > - **应用表现层 (PWA):** Vue 3 (或 React), ECharts, Element Plus (或 Ant Design)
    > - **数据库:** MySQL (或 MariaDB)
    > - **开发/部署环境:** Arch Linux (开发), Raspberry Pi OS (部署), Nginx
5.  **高层架构图:** `系统的基本蓝图。`
    > `[感知层: STM32 + 传感器/执行器] <--UART--> [边缘层: 树莓派 (串口服务 + Flask API + 数据库)] <--HTTP/S--> [应用层: 用户设备上的PWA]`
6.  **核心数据模型/表结构:** `项目的数据骨架。`
    > - `users`, `roles`, `user_roles`, `devices`, `sensor_data`, `control_logs`
7.  **主要页面的线框图:** `知道它大概长什么样。`
    > - **登录页**, **数据仪表盘**, **历史数据页**, **后台管理页**.
8.  **任务列表/看板:** `把要做的事情都列出来。`
    > 答：见下文的 **“敏捷开发冲刺计划”**，已分解为四周的冲刺任务。
9.  **一个优秀的 README.md 草稿:** `准备好向世界介绍你的项目。`
    > 答：本文档本身即为项目 README 的持续演进版本。

---

## 🚀 敏捷开发冲刺计划 (Agile Development Sprint Plan)

鉴于项目周期仅有一个月，我们采用**敏捷迭代**的开发模式，以**周**为单位进行冲刺（Sprint）。每一周的目标都是构建一个可运行、可演示的“垂直切片”功能，确保项目风险尽早暴露、核心链路优先打通。

---

### **第一周：核心链路贯通 (The "Tracer Bullet" Sprint)**

**🎯 本周目标：** 跑通一个最简化的端到端流程。实现从传感器采集一个数据，通过树莓派，最终显示在一个极简的网页上。这是整个项目的“龙骨”，优先级最高。

- [ ] **任务 1.1 (硬件):** STM32 初始化
  - [ ] 使用 STM32CubeMX 配置好时钟和至少一个 UART（用于与树莓派通信）。
  - [ ] 编写代码驱动一个传感器（如 DHT22 温湿度传感器）。
- [ ] **任务 1.2 (硬件):** 基础数据发送
  - [ ] STM32 定时读取传感器数据。
  - [ ] 将数据格式化成简单的 JSON 字符串 (例如 `{"temp": 25.5}`)。
  - [ ] 通过 UART 将此字符串发送出去。
  - [ ] **验证:** 在 Arch Linux 上用 `minicom` 确认能收到数据。
- [ ] **任务 1.3 (边缘计算):** 基础数据接收
  - [ ] 在树莓派上编写一个简单的 Python 脚本，使用 `pyserial` 库读取串口数据并打印到控制台。
  - [ ] **验证:** 确认脚本能正确接收并显示来自 STM32 的数据。
- [ ] **任务 1.4 (后端):** 最简 API 服务
  - [ ] 搭建一个基础的 Flask 应用。
  - [ ] 将串口读取逻辑放入一个后台线程。
  - [ ] 创建一个 API 端点 `GET /api/v1/sensors/latest`，它返回后台线程收到的最新数据。
  - [ ] **验证:** 在 Arch Linux 上用 `curl http://<树莓派IP>:5000/api/v1/sensors/latest` 确认能获取到 JSON 数据。
- [ ] **任务 1.5 (前端):** 最简数据显示
  - [ ] 创建一个最简单的 `index.html` 文件，包含一个用于显示数据的 `<div>`。
  - [ ] 用原生 JavaScript 编写一个 `fetch` 请求，定时调用树莓派的 API，并将获取到的数据显示在页面上。
  - [ ] **验证:** 在浏览器中打开此 html 文件，确认能看到来自传感器的实时数据。

**✅ 周末复盘:** 我们应该有了一个能工作的原型，证明了整个技术架构是可行的。

---

### **第二周：MVP 功能完善 (The MVP Feature Sprint)**

**🎯 本周目标：** 在核心链路基础上，扩展 MVP（最小可行产品）功能。实现所有传感器的数据化、基础的设备反向控制和数据持久化。

- [ ] **任务 2.1 (硬件):** 功能扩展
  - [ ] 集成所有传感器（光照、土壤湿度等），扩展上报的 JSON 数据结构。
  - [ ] 编写 GPIO 控制代码来驱动一个执行器（如 LED 或继电器）。
  - [ ] 实现 UART 接收和命令解析，能根据接收到的 JSON 命令（如 `{"target": "led", "action": "on"}`）控制执行器。
- [ ] **任务 2.2 (后端):** 数据库集成
  - [ ] 在树莓派上安装并配置好 MariaDB/MySQL。
  - [ ] 在 Flask 中使用 SQLAlchemy 定义数据模型 (`sensor_data`, `devices`)。
  - [ ] 修改后台线程，将收到的每条传感器数据存入数据库。
- [ ] **任务 2.3 (后端):** 控制 API
  - [ ] 创建 `POST /api/v1/actuators/control` API，接收前端的控制指令。
  - [ ] 该 API 将指令转换为与 STM32 约定的格式，并通过串口发送出去。
- [ ] **任务 2.4 (前端):** 基础仪表盘
  - [ ] 使用 Vue 或 React 初始化前端项目，并引入一个 UI 库。
  - [ ] 创建一个仪表盘页面，用卡片和仪表盘组件展示所有传感器的实时数据。
  - [ ] 在页面上添加控制按钮（如“打开水泵”），点击时调用后端的控制 API。
- [ ] **任务 2.5 (集成测试):**
  - [ ] 端到端测试：在网页上点击按钮，观察 STM32 上的 LED/继电器是否动作。
  - [ ] 数据库验证：检查 `sensor_data` 表中是否有持续写入的新数据。

**✅ 周末复盘:** 我们应该有了一个功能基本完整的系统原型，可以实时监控和控制。

---

### **第三周：应用层与用户体验 (The Application & UX Sprint)**

**🎯 本周目标：** 将原型完善成一个真正的应用。重点是用户系统、历史数据可视化和界面美化，满足毕业设计的核心软件要求。

- [ ] **任务 3.1 (后端):** 用户系统 (RBAC)
  - [ ] 设计并创建 `users`, `roles`, `user_roles` 表。
  - [ ] 实现用户注册、登录 API，使用 JWT 进行认证。
  - [ ] 创建 API 保护装饰器，实现不同角色对 API 的访问控制。
- [ ] **任务 3.2 (后端):** 历史数据 API
  - [ ] 创建 `GET /api/v1/sensors/history` API，支持按时间范围从数据库查询数据。
- [ ] **任务 3.3 (数据库):** 高级功能
  - [ ] 根据毕设要求，设计并实现一个存储过程和一个触发器。
- [ ] **任务 3.4 (前端):** 用户流程与历史数据
  - [ ] 创建登录页面，并与后端 API 对接。
  - [ ] 创建历史数据页面，使用 ECharts 或类似图表库调用历史 API，将数据可视化展示。
- [ ] **任务 3.5 (前端):** 后台管理与 PWA
  - [ ] 创建一个简单的后台管理界面，用于用户和设备管理。
  - [ ] 实现响应式布局，确保在手机和桌面端都有良好体验。
  - [ ] 配置 PWA 所需的 `manifest.json` 和 `Service Worker`。

**✅ 周末复盘:** 系统应具备完整的用户体系和数据展现能力，软件部分已基本满足毕设要求。

---

### **第四周：测试、部署与文档 (The Polish, Deploy & Document Sprint)**

**🎯 本周目标：** 稳定系统，完成部署，并集中精力撰写毕业设计文档和论文。**本周不应再开发新功能。**

- [ ] **任务 4.1 (测试):** 系统健壮性测试
  - [ ] 编写测试用例，覆盖核心功能。
  - [ ] 进行异常测试（如拔掉串口、断网），确保系统能妥善处理。
- [ ] **任务 4.2 (部署):** 生产环境部署
  - [ ] 使用 Gunicorn 和 Nginx 在树莓派上部署 Flask 应用。
  - [ ] 配置 `systemd` 服务，实现开机自启动。
- [ ] **任务 4.3 (硬件):** 定型
  - [ ] （如果时间允许）将电路从面包板焊接到洞洞板上，使其更稳固。
- [ ] **任务 4.4 (文档):** 论文与答辩准备
  - [ ] 绘制系统架构图、数据流图、ER 图。
  - [ ] 集中精力撰写毕业论文的系统设计、实现和测试章节。
  - [ ] 准备答辩 PPT 和演示脚本。
- [ ] **任务 4.5 (代码整理):**
  - [ ] 清理代码，添加必要的注释。
  - [ ] 最终完善 `README.md`，包含项目介绍、技术栈和部署说明。

**✅ 项目完成:** 一个稳定、可演示、文档齐全的毕业设计项目。
